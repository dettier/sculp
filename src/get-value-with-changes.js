////////////////////////////////////////////////////////////////////////////////
// REQUIRES : BEGIN
////////////////////////////////////////////////////////////////////////////////

import keys from 'lodash-compat/object/keys';
import cloneDeep from 'lodash-compat/lang/cloneDeep';
import { setValue } from './object/helper';

////////////////////////////////////////////////////////////////////////////////
// REQUIRES : END
////////////////////////////////////////////////////////////////////////////////

/**
 * Функция возвращает новый объект с примененными изменениями fieldChanges.
 * @param {Object} value текущей объект
 * @param {Object} fieldChanges новые значения полей
 */
function getValueWithChanges (value, fieldChanges) {
  let newValue = cloneDeep(value);

  const fieldKeys = keys(fieldChanges);
  for (let i = 0; i < fieldKeys.length; i++) {
    const key = fieldKeys[i];
    newValue = setValue(newValue, key, fieldChanges[key]);
  }

  return newValue;
}

////////////////////////////////////////////////////////////////////////////////
// export
////////////////////////////////////////////////////////////////////////////////

export default getValueWithChanges;
