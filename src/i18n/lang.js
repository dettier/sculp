////////////////////////////////////////////////////////////////////////////////
// REQUIRES : BEGIN
////////////////////////////////////////////////////////////////////////////////

import { currentDefaultOptions } from '../options';

import capitalize from 'underscore.string/capitalize';
import template from 'lodash-compat/string/template';

////////////////////////////////////////////////////////////////////////////////
// REQUIRES : END
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// getMessages messages for language
////////////////////////////////////////////////////////////////////////////////

function getMessages (lang) {
  if (lang == null)
    return {};
  return require('./languages/' + lang + '.js');
}

////////////////////////////////////////////////////////////////////////////////
// exports
////////////////////////////////////////////////////////////////////////////////

let lang;

////////////////////////////////////////////////////////////////////////////////
// setLanguage
////////////////////////////////////////////////////////////////////////////////

export function setLanguage (_lang = currentDefaultOptions.lang) {
  lang = _lang;
}

////////////////////////////////////////////////////////////////////////////////
// getMessage
////////////////////////////////////////////////////////////////////////////////

export function getMessage (key, data, _capitalize = false) {
  const tmpl = getMessages(lang)[key] || '';
  const str = template(tmpl)(data);
  return _capitalize ? capitalize(str) : str;
}

////////////////////////////////////////////////////////////////////////////////
// setting default language
////////////////////////////////////////////////////////////////////////////////

setLanguage();
