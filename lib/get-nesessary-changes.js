////////////////////////////////////////////////////////////////////////////////
// REQUIRES : BEGIN
////////////////////////////////////////////////////////////////////////////////

import isEqual from 'lodash-compat/lang/isEqual';
import omit from 'lodash-compat/object/omit';
import { getValue } from './object/helper';

////////////////////////////////////////////////////////////////////////////////
// REQUIRES : END
////////////////////////////////////////////////////////////////////////////////

/**
 * Функция из объекта с новыми значениями полей уберает все
 * значения, которые равны текущим значениям. Возвращает новый объект.
 * @param {Object} value текущей объект
 * @param {Object} fieldChanges новые значения полей
 */
function getNecessaryChanges (value, fieldChanges) {
  return omit(fieldChanges, (newValue, key) => {
    return isEqual(newValue, getValue(value, key));
  });
}

////////////////////////////////////////////////////////////////////////////////
// export
////////////////////////////////////////////////////////////////////////////////

export default getNecessaryChanges;
